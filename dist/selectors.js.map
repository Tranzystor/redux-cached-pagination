{"version":3,"sources":["../src/pagination-lib/selectors.js"],"names":["getTotalElements","sliceName","store","searchParams","currentStore","validatedSearchParams","filtersKey","pagination","elementsCount","getPage","normalized","page","foundPage","pages","loadedElements","elements","map","entities","x","getElementByTotalIndex","elementsPerPage","totalIndex","pageNum","Math","floor","rest","elementIndex","element","getPaginationParams","paginationParams","getSearchParams","getCurrentPage","currentPage"],"mappings":"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","file":"selectors.js","sourcesContent":["import { buildUniqueKey } from './utils';\r\n\r\nexport const getTotalElements = (sliceName) => (store, searchParams) => {\r\n    const currentStore = store[sliceName];\r\n    const validatedSearchParams = searchParams ? searchParams : currentStore.searchParams;\r\n    const filtersKey = buildUniqueKey(validatedSearchParams);\r\n\r\n    if (currentStore && currentStore.pagination[filtersKey]) {\r\n        const elementsCount = currentStore.pagination[filtersKey].elementsCount;\r\n        return elementsCount ? elementsCount : 0;\r\n    }\r\n    return 0;\r\n}\r\n\r\nexport const getPage = (sliceName, normalized) => (store, page, searchParams) => {\r\n    const currentStore = store[sliceName];\r\n    const validatedSearchParams = searchParams ? searchParams : currentStore.searchParams;\r\n    const filtersKey = buildUniqueKey(validatedSearchParams);\r\n    if (currentStore && currentStore.pagination[filtersKey]) {\r\n        const foundPage = currentStore.pagination[filtersKey].pages[page];\r\n\r\n        if (foundPage && !normalized) {\r\n            const loadedElements = foundPage.elements.map(x => {\r\n                return currentStore.entities[x];\r\n            })\r\n            return { ...foundPage, elements: loadedElements };\r\n        }\r\n        return foundPage;\r\n    }\r\n    return null;\r\n}\r\n\r\nexport const getElementByTotalIndex = (sliceName, elementsPerPage) => (store, totalIndex, searchParams) => {\r\n    const pageNum = Math.floor(totalIndex / elementsPerPage) + 1;\r\n    const currentStore = store[sliceName];\r\n    const validatedSearchParams = searchParams ? searchParams : currentStore.searchParams;\r\n    const page = getPage(sliceName)(store, pageNum, validatedSearchParams);\r\n    if (page) {\r\n        const { elements, ...rest } = page;\r\n        if (page.elements) {\r\n            const elementIndex = totalIndex % elementsPerPage;\r\n            const element = page.elements[elementIndex];\r\n            return { ...element, ...rest };\r\n        }\r\n        return rest;\r\n    }\r\n    return null;\r\n}\r\n\r\nexport const getPaginationParams = (sliceName) => (store) => {\r\n    const currentStore = store[sliceName];\r\n    return currentStore.paginationParams;\r\n}\r\n\r\nexport const getSearchParams = (sliceName) => (store) => {\r\n    const searchParams = store[sliceName].searchParams;\r\n    return searchParams;\r\n}\r\n\r\nexport const getCurrentPage = (sliceName) => (store) => {\r\n    const currentPage = store[sliceName].currentPage;\r\n    return currentPage;\r\n}"]}